(function(t){function e(e){for(var s,r,h=e[0],o=e[1],l=e[2],u=0,d=[];u<h.length;u++)r=h[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&d.push(n[r][0]),n[r]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s]);c&&c(e);while(d.length)d.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],s=!0,r=1;r<i.length;r++){var o=i[r];0!==n[o]&&(s=!1)}s&&(a.splice(e--,1),t=h(h.s=i[0]))}return t}var s={},n={app:0},a=[];function r(t){return h.p+"js/"+({}[t]||t)+"."+{"chunk-2d238458":"8fb082ab"}[t]+".js"}function h(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,h),i.l=!0,i.exports}h.e=function(t){var e=[],i=n[t];if(0!==i)if(i)e.push(i[2]);else{var s=new Promise((function(e,s){i=n[t]=[e,s]}));e.push(i[2]=s);var a,o=document.createElement("script");o.charset="utf-8",o.timeout=120,h.nc&&o.setAttribute("nonce",h.nc),o.src=r(t);var l=new Error;a=function(e){o.onerror=o.onload=null,clearTimeout(u);var i=n[t];if(0!==i){if(i){var s=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",l.name="ChunkLoadError",l.type=s,l.request=a,i[1](l)}n[t]=void 0}};var u=setTimeout((function(){a({type:"timeout",target:o})}),12e4);o.onerror=o.onload=a,document.head.appendChild(o)}return Promise.all(e)},h.m=t,h.c=s,h.d=function(t,e,i){h.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},h.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},h.t=function(t,e){if(1&e&&(t=h(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(h.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)h.d(i,s,function(e){return t[e]}.bind(null,s));return i},h.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return h.d(e,"a",e),e},h.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},h.p="/",h.oe=function(t){throw console.error(t),t};var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=l;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("cd49")},"7a11":function(t,e,i){"use strict";var s=i("8900"),n=i.n(s);n.a},8900:function(t,e,i){},cd49:function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var s=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",[i("v-content",[i("sky")],1)],1)},a=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("keypress",{attrs:{"key-code":32,event:"keydown"},on:{pressed:t.startGame}}),i("div",{staticClass:"controlBar"},[i("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[i("v-row",{attrs:{dense:""}},[i("v-col",{attrs:{cols:"1"}}),i("v-col",{attrs:{cols:"4"}},[null!==t.planeOneHealth&&t.planeOneHealth>=0?i("health-bar",{attrs:{value:t.planeOneHealth,name:t.playerOne}}):t._e()],1),i("v-col",{attrs:{cols:"2"}}),i("v-col",{attrs:{cols:"4"}},[null!==t.planeTwoHealth&&t.planeTwoHealth>=0?i("health-bar",{attrs:{value:t.planeTwoHealth,name:t.playerTwo}}):t._e()],1),i("v-col",{attrs:{cols:"1"}})],1)],1)],1),i("v-dialog",{attrs:{persistent:"",width:"1000"},model:{value:t.welcomeDialogModel,callback:function(e){t.welcomeDialogModel=e},expression:"welcomeDialogModel"}},[i("v-card",[i("v-img",{attrs:{src:"logo.png"}}),i("v-card-text",{staticClass:"pt-6 display-4 text-center"},[i("v-switch",{staticClass:"mt-5",attrs:{label:"Enable sounds"},on:{change:t.soundsToggled},model:{value:t.sounds,callback:function(e){t.sounds=e},expression:"sounds"}}),i("v-text-field",{attrs:{"persistent-hint":"",hint:"Player one name",autofocus:"",rules:[t.rules.required]},model:{value:t.playerOne,callback:function(e){t.playerOne=e},expression:"playerOne"}}),i("v-text-field",{attrs:{"persistent-hint":"",hint:"Player two name",rules:[t.rules.required]},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.startGame(e)}},model:{value:t.playerTwo,callback:function(e){t.playerTwo=e},expression:"playerTwo"}}),i("v-btn",{staticClass:"body-1",attrs:{color:"primary"},on:{click:t.startGameClicked}},[t._v("START GAME")])],1)],1)],1),i("v-dialog",{attrs:{width:"600"},model:{value:t.gameOverDialogModel,callback:function(e){t.gameOverDialogModel=e},expression:"gameOverDialogModel"}},[i("v-card",[i("v-card-text",{staticClass:"pt-6 display-4 text-center"},[t._v(" "+t._s(t.winningPlayerName)+" WINS! "),i("div",{staticClass:"caption"},[t._v("Get ready dual continues....")])])],1)],1),i("canvas",{directives:[{name:"show",rawName:"v-show",value:!t.welcomeDialogModel,expression:"!welcomeDialogModel"}],ref:"sky",staticClass:"sky"})],1)},h=[],o=(i("d3b7"),i("99af"),i("cb29"),i("4160"),i("b0c0"),i("159b"),i("2909")),l=i("d4ec"),u=i("bee2"),c=function(){function t(e,i,s,n){Object(l["a"])(this,t);var a=Math.abs(e-s),r=Math.abs(i-n);this.distance=Math.sqrt(a*a+r*r)}return Object(u["a"])(t,[{key:"getDistance",value:function(){return this.distance}}]),t}(),d=function(){function t(e,i,s,n,a,r){Object(l["a"])(this,t);var h,o,u=e-s,c=i-n,d=a-s,g=r-n,f=u*d+c*g,v=d*d+g*g,y=-1;0!==v&&(y=f/v),y<0?(h=s,o=n):y>1?(h=a,o=r):(h=s+y*d,o=n+y*g);var p=e-h,m=i-o;this.distance=Math.sqrt(p*p+m*m)}return Object(u["a"])(t,[{key:"getDistance",value:function(){return this.distance}}]),t}(),g=function(){function t(e,i,s,n){Object(l["a"])(this,t);var a=this.toRadians(n),r=Math.round(Math.cos(a)*s),h=Math.round(Math.sin(a)*s);this.currentX=e,this.currentY=i,this.x=e+r,this.y=i+h}return Object(u["a"])(t,[{key:"getNewX",value:function(){return this.x}},{key:"getNewY",value:function(){return this.y}},{key:"getGradient",value:function(){return(this.y-this.currentY)/(this.x-this.currentX)}},{key:"toRadians",value:function(t){return t*(Math.PI/180)}}]),t}(),f=function(){function t(e){Object(l["a"])(this,t),this.ctx=e.getContext("2d"),this.canvas=e,this.clouds=[],this.planes=[],this.cloudsGrowing=!0,this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.gameOver=!1,this.gameOverHandler=function(){},this.designClouds(),console.log("SKY INITIALIZED")}return Object(u["a"])(t,[{key:"addPlane",value:function(t){t.setCanvas(this.canvas),this.planes.push(t)}},{key:"animate",value:function(){var t=this;this.gameOver||(this.clearSky(),this.planes.forEach((function(e){if(e.hasCrashed()&&(t.gameOverHandler&&t.gameOverHandler(),t.gameOver=!0),t.gameOver&&e.toggleSounds(!1),!t.gameOver){e.draw();var i=t.getEnemyBullets(e.name);i.forEach((function(i){t.detectBulletCollision(e,i)}))}})),this.drawClouds(),requestAnimationFrame(this.animate.bind(this)))}},{key:"getEnemyBullets",value:function(t){var e=[];return this.planes.forEach((function(i){i.name!==t&&(e=[].concat(Object(o["a"])(e),Object(o["a"])(i.getBullets())))})),e}},{key:"detectBulletCollision",value:function(t,e){var i=new c(t.getX(),t.getY(),e.getX(),e.getY()).getDistance();if(!(i>=40)){var s=new g(e.getX(),e.getY(),100,e.getDirection()),n=new d(t.getX(),t.getY(),e.getX(),e.getY(),s.getNewX(),s.getNewY()).getDistance(),a=Math.round(40-n);t.addDamage(a),e.hit(),console.log("Damage ("+a+") to plane "+t.name)}}},{key:"clearSky",value:function(){this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"drawClouds",value:function(){var t=this,e=0;this.clouds.forEach((function(i){t.drawCloud(i.size,i.x,i.y,i.startAngle,i.endAngle),i.size>e&&(e=i.size),t.cloudsGrowing?i.size+=.02:i.size-=.04})),e>150&&(this.cloudsGrowing=!1),e<100&&(this.cloudsGrowing=!0)}},{key:"drawCloud",value:function(t,e,i,s,n){this.ctx&&(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.beginPath(),this.ctx.arc(e,i,t,s,n,!0),this.ctx.fillStyle="white",this.ctx.fill(),this.ctx.fill(),this.ctx.closePath())}},{key:"designClouds",value:function(){var t=this.canvas.width,e=0,i=0;while(t>0){var s=Math.floor(100*Math.random());t-=s,i+=s,this.clouds.push({size:s,x:i,y:e,startAngle:Math.PI,endAngle:2*Math.PI}),this.clouds.push({size:s,x:this.canvas.width-i,y:this.canvas.height,startAngle:2*Math.PI,endAngle:Math.PI})}var n=this.canvas.height;e=0,i=0;while(n>0){var a=Math.floor(100*Math.random());n-=a,e+=a,this.clouds.push({size:a,x:i,y:e,startAngle:0,endAngle:2*Math.PI}),this.clouds.push({size:a,x:this.canvas.width,y:this.canvas.height-e,startAngle:0,endAngle:2*-Math.PI})}}}]),t}(),v=(i("4de4"),i("7db0"),function(){function t(e,i,s,n){Object(l["a"])(this,t),this.x=i,this.y=s,this.directionDegrees=n,this.canvas=e,this.ctx=e.getContext("2d"),this.hitTarget=!1}return Object(u["a"])(t,[{key:"render",value:function(){this.move(),null!==this.ctx&&null!==this.canvas&&(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.beginPath(),this.ctx.arc(this.x,this.y,3,0,2*Math.PI,!1),this.ctx.fillStyle="black",this.ctx.fill(),this.ctx.closePath())}},{key:"hit",value:function(){this.hitTarget=!0}},{key:"move",value:function(){var e=new g(this.x,this.y,t.BULLET_SPEED,this.directionDegrees);this.x=e.getNewX(),this.y=e.getNewY()}},{key:"isFlying",value:function(){return!(this.x>this.canvas.width)&&(!(this.x<0)&&(!(this.y>this.canvas.height)&&(!(this.y<0)&&!this.hitTarget)))}},{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"getDirection",value:function(){return this.directionDegrees}}]),t}());v.BULLET_SPEED=25;var y=function(){function t(e,i,s,n){var a=this;Object(l["a"])(this,t);var r=Math.round(10*Math.random()),h=Math.round(10*Math.random());this.x=i+r,this.y=s+h,this.canvas=e,this.ctx=e.getContext("2d"),this.visible=!0,this.radius=30*n/100,this.opacity=n/100,this.intensity=n,setInterval((function(){a.fadeCloud()}),100)}return Object(u["a"])(t,[{key:"isVisible",value:function(){return this.visible}},{key:"fadeCloud",value:function(){this.radius-=1,this.opacity-=.02,this.opacity<0&&(this.visible=!1,this.opacity=0),this.radius<1&&(this.visible=!1,this.radius=1)}},{key:"render",value:function(){if(null!==this.ctx&&null!==this.canvas){this.ctx.setTransform(1,0,0,1,0,0),this.ctx.beginPath();var t=this.ctx.createRadialGradient(this.x,this.y,1,this.x,this.y,this.radius);t.addColorStop(1,this.intensityColor(0)),t.addColorStop(0,this.intensityColor(this.opacity)),this.ctx.arc(this.x,this.y,this.radius,0,2*Math.PI),this.ctx.fillStyle=t,this.ctx.fill(),this.ctx.closePath()}}},{key:"intensityColor",value:function(t){return"rgba("+(150-this.intensity)+","+(150-this.intensity)+","+(150-this.intensity)+","+t+")"}}]),t}(),p=function(){function t(e,i){Object(l["a"])(this,t);var s=t.planeTypes.find((function(t){return t.name===e}));this.name=s.name,this.image=new Image,this.image.src=s.image,this.speed=i.speed,this.x=i.x,this.y=i.y,this.width=i.width,this.height=i.height,this.scale=i.scale,this.directionDegrees=i.directionDegrees,this.audio=new Audio(s.audio),this.crashAudio=new Audio("./plane_crash.wav"),this.hitAudio=new Audio("./bullet_hit.wav"),this.hitAudio.volume=.3,this.gunAudio=new Audio("./gun_fire.wav"),this.gunAudio.volume=.2,this.keyLeft=i.keyLeft,this.keyRight=i.keyRight,this.keyFire=i.keyFire,this.keyLeftPressed=!1,this.keyRightPressed=!1,this.keyFirePressed=!1,this.ctx=null,this.canvas=null,this.health=i.health,this.bullets=[],this.smokeClouds=[],this.fallingOutOfSky=!1,this.crashed=!1,this.canFire=!0,window.addEventListener("keydown",this.keyDown.bind(this)),window.addEventListener("keyup",this.keyUp.bind(this))}return Object(u["a"])(t,[{key:"setCanvas",value:function(t){var e=this;this.ctx=t.getContext("2d"),this.canvas=t,this.image.onload=function(){e.draw()}}},{key:"toggleSounds",value:function(t){t?this.audio.play():this.audio.pause()}},{key:"fire",value:function(){var t=this;this.canFire&&(this.canFire=!1,setTimeout((function(){t.canFire=!0}),500),this.gunAudio.currentTime=0,this.gunAudio.play(),this.canvas&&this.bullets.push(new v(this.canvas,this.x,this.y,this.directionDegrees)))}},{key:"right",value:function(){this.fallingOutOfSky||(360===this.directionDegrees&&(this.directionDegrees=0),this.directionDegrees+=2)}},{key:"left",value:function(){this.fallingOutOfSky||(0===this.directionDegrees&&(this.directionDegrees=360),this.directionDegrees-=2)}},{key:"addDamage",value:function(t){this.hitAudio.currentTime=0,this.hitAudio.play(),t>this.health?this.health=0:this.health-=t,0===this.health&&(this.fallingOutOfSky=!0,this.audio.pause(),this.crashAudio.play())}},{key:"getBullets",value:function(){return this.bullets}},{key:"hasCrashed",value:function(){return this.crashed}},{key:"draw",value:function(){if(this.keyLeftPressed&&this.left(),this.keyRightPressed&&this.right(),this.keyFirePressed&&this.fire(),null!==this.ctx&&null!==this.canvas){if(Math.random()<.7){var t=100-this.health;t>0&&this.smokeClouds.push(new y(this.canvas,this.x,this.y,100-this.health))}this.smokeClouds.forEach((function(t){t.render()})),this.ctx.beginPath(),this.ctx.setTransform(this.scale,0,0,this.scale,this.x,this.y),this.ctx.rotate(this.getImageRotation()),this.ctx.drawImage(this.image,-this.image.width/2,-this.image.height/2),this.ctx.closePath()}this.bullets.forEach((function(t){t.render()})),this.smokeClouds=this.smokeClouds.filter((function(t){return t.isVisible()})),this.bullets=this.bullets.filter((function(t){return t.isFlying()})),this.fallingOutOfSky&&this.fallOutOfSky(),this.move(),this.calculateVolume()}},{key:"fallOutOfSky",value:function(){var t=this;90!==this.directionDegrees&&(this.directionDegrees<90&&(this.directionDegrees+=1,this.speed=this.speed+.1),this.directionDegrees>90&&(this.directionDegrees-=1,this.speed=this.speed+.1)),setTimeout((function(){t.crashed=!0}),8e3)}},{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"getDirection",value:function(){return this.directionDegrees}},{key:"move",value:function(){var t=new g(this.x,this.y,this.speed,this.directionDegrees);this.x=t.getNewX(),this.y=t.getNewY(),this.detectBoundaries()}},{key:"detectBoundaries",value:function(){this.fallingOutOfSky?this.audio.playbackRate<2&&(this.audio.playbackRate+=.1):(this.x>this.canvas.width+this.width/2&&(this.x=-this.width/2,this.restartAudio()),this.x<-this.width/2&&(this.x=this.canvas.width+this.width/2,this.restartAudio()),this.y>this.canvas.height+this.height/2&&(this.y=-this.height/2,this.restartAudio()),this.y<-this.height/2&&(this.y=this.canvas.height+this.height/2,this.restartAudio()))}},{key:"restartAudio",value:function(){this.audio&&(this.audio.currentTime=0)}},{key:"calculateVolume",value:function(){if(this.audio){var t=0;this.x<this.canvas.width/2&&(t=this.x/this.canvas.width/2),this.x>this.canvas.width/2&&(t=(this.canvas.width-this.x)/this.canvas.width/2),t+=.2,t>1&&(t=1),t<0&&(t=0),this.audio.volume=t}}},{key:"getImageRotation",value:function(){return(this.directionDegrees+t.IMAGE_ROTATION_DEGREES)*Math.PI/180}},{key:"keyDown",value:function(t){this.handleKeys(t,!0)}},{key:"keyUp",value:function(t){this.handleKeys(t,!1)}},{key:"handleKeys",value:function(t,e){t.key===this.keyLeft&&(this.keyLeftPressed=e),t.key===this.keyRight&&(this.keyRightPressed=e),t.key===this.keyFire&&(this.keyFirePressed=e)}}]),t}();p.IMAGE_ROTATION_DEGREES=90,p.planeTypes=[{name:"mustang",image:"/plane.png",audio:"spitfire.mp3"},{name:"spitfire",image:"/spitfire.png",audio:"spitfire2.mp3"},{name:"junker",image:"/junker.png",audio:"spitfire2.mp3"}];var m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex"},[i("div",{staticClass:"title grey--text text-darken-4 pl-2 pr-2 text-no-wrap"},[t._v(" "+t._s(t.name.toUpperCase())+" ")]),i("v-progress-linear",{staticClass:"ma-3",attrs:{striped:"",height:"10",value:t.value,color:t.color}}),i("v-sheet",{staticClass:"white--text pl-2 pr-2 pt-1",attrs:{color:t.color}},[t._v(" "+t._s(t.value)+" ")])],1)},w=[],k=(i("a9e3"),{name:"HealthBar",props:{value:{required:!0,type:Number},name:{required:!0,type:String}},computed:{color:function(){return this.value>90?"green":this.value>70?"lime darken-1":this.value>55?"yellow darken-1":this.value>40?"amber":this.value>20?"orange":"red"}}}),x=k,b=i("2877"),O=i("6544"),D=i.n(O),T=i("8e36"),C=i("8dd9"),M=Object(b["a"])(x,m,w,!1,null,null,null),P=M.exports;D()(M,{VProgressLinear:T["a"],VSheet:C["a"]});var A={name:"Spitfire",props:{msg:String},components:{HealthBar:P,Keypress:function(){return i.e("chunk-2d238458").then(i.t.bind(null,"ff57",7))}},data:function(){return{sky:null,sounds:!0,listenKeys:["ArrowRight","ArrowLeft","ArrowUp","a","d","w"],keysPressed:[],planeOne:null,planeTwo:null,clouds:[],welcomeDialogModel:!0,gameOverDialogModel:!1,playerOne:"Player One",playerTwo:"Player Two",rules:{required:function(t){return!!t||"Name is required."}}}},computed:{planeOneHealth:function(){return this.planeOne?this.planeOne.health:null},planeTwoHealth:function(){return this.planeTwo?this.planeTwo.health:null},winningPlayerName:function(){return this.planeOne&&this.planeOne.health<=0?this.playerTwo:this.planeTwo&&this.planeTwo.health<=0?this.playerOne:null}},methods:{startGameClicked:function(){this.playerOne.length>=1&&this.playerTwo.length>=1&&this.createGame()},createGame:function(){this.welcomeDialogModel=!1,this.gameOverDialogModel=!1,this.sky=new f(this.$refs.sky),this.sky.gameOverHandler=this.gameOver,this.planeOne=new p("spitfire",{speed:5,health:100,directionDegrees:0,width:100,height:100,scale:.25,x:0,y:this.$refs.sky.height/2+50,keyFire:"ArrowUp",keyLeft:"ArrowLeft",keyRight:"ArrowRight"}),this.planeTwo=new p("mustang",{speed:5,health:100,directionDegrees:180,width:100,height:100,scale:.25,x:this.$refs.sky.width,y:this.$refs.sky.height/3+50,keyFire:"a",keyLeft:"d",keyRight:"w"}),this.planeOne.toggleSounds(this.sounds),this.planeTwo.toggleSounds(this.sounds),this.sky.addPlane(this.planeOne),this.sky.addPlane(this.planeTwo),this.sky.animate()},soundsToggled:function(){this.planeOne.toggleSounds(this.sounds)},gameOver:function(){var t=this;this.gameOverDialogModel=!0,setTimeout((function(){t.gameOverDialogModel=!1,t.createGame()}),3e3)},startGame:function(){!0===this.welcomeDialogModel&&(this.welcomeDialogModel=!1,this.createGame())}}},S=A,E=(i("7a11"),i("8336")),j=i("b0af"),_=i("99d9"),I=i("62ad"),R=i("a523"),G=i("169a"),L=i("adda"),V=i("0fd9"),N=i("b73d"),F=i("8654"),H=Object(b["a"])(S,r,h,!1,null,"262afa27",null),B=H.exports;D()(H,{VBtn:E["a"],VCard:j["a"],VCardText:_["a"],VCol:I["a"],VContainer:R["a"],VDialog:G["a"],VImg:L["a"],VRow:V["a"],VSwitch:N["a"],VTextField:F["a"]});var Y=s["a"].extend({name:"App",components:{Sky:B},data:function(){return{}}}),X=Y,q=i("7496"),z=i("a75b"),$=Object(b["a"])(X,n,a,!1,null,null,null),U=$.exports;D()($,{VApp:q["a"],VContent:z["a"]});var K=i("f309");s["a"].use(K["a"]);var J=new K["a"]({});s["a"].config.productionTip=!1,new s["a"]({vuetify:J,render:function(t){return t(U)}}).$mount("#app")}});
//# sourceMappingURL=app.a6e83634.js.map